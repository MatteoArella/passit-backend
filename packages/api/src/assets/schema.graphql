interface Entity {
  id: ID!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime
}

enum Sort {
  asc
  desc
}

type PageInfo {
  hasNextPage: Boolean!
  total: Int
}

type InsertionConnection {
  items: [Insertion]
  pageInfo: PageInfo!
}

type User implements Entity {
  id: ID!
  email: String!
  familyName: String!
  givenName: String!
  phoneNumber: String
  birthDate: String
  picture: String
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime
  insertions(filter: UserInsertionsFilterInput, order: InsertionOrderInput, first: Int, after: Int): InsertionConnection!
}

type Location {
  country: String!
  state: String!
  city: String!
}

type Insertion implements Entity {
  id: ID!
  title: String!
  description: String!
  subject: String!
  location: Location!
  tutor: User!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime
}

input LocationInput {
  country: String!
  state: String!
  city: String!
}

input InsertionInput {
  title: String!
  description: String!
  subject: String!
  location: LocationInput!
}

input LocationFilterInput {
  country: String
  state: String
  city: String
}

input UserInsertionsFilterInput {
  subject: String
  location: LocationFilterInput
}

input InsertionFilterInput {
  subject: String!
  location: LocationFilterInput!
}

input InsertionOrderInput {
  createdAt: Sort
  updatedAt: Sort
}

type Query {
  me: User
  getInsertions(filter: InsertionFilterInput!, order: InsertionOrderInput, first: Int, after: Int): InsertionConnection!
  getInsertion(insertion: ID!): Insertion
}

type Mutation {
  createInsertion(insertion: InsertionInput!): Insertion
}

schema {
  query: Query
  mutation: Mutation
}
